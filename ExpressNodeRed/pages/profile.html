<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Mustache -->
    <script src="https://unpkg.com/mustache@latest"></script>

    <!-- Personal includes -->
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="/profile/profile.css">

    <script src="/profile/profile.js"></script>
    <script>
        let protocol = "{{ protocol }}";
        let frontendUrl = "{{ frontendUrl }}";
        let backendUrl = "{{ backendUrl }}";
    </script>
    
    <!-- JavaScript -->
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <!-- Default theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
    <!-- Semantic UI theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"/>
    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>

    
    <!-- 
        RTL version
    -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.rtl.min.css"/>
    <!-- Default theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.rtl.min.css"/>
    <!-- Semantic UI theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.rtl.min.css"/>
    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.rtl.min.css"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet"> 
    <title>WIMP</title>

    <!-- Fontawsome -->
    <script src="https://kit.fontawesome.com/182b62724d.js" crossorigin="anonymous"></script>

    <title>WIMP</title>
    <link rel="shortcut icon" type="image/x-icon" href="/logo.svg">
</head>

    
<body id="profile">
    <header>
        <img src="/logo.svg">
        <h1>WIMP</h1>
        <button id="logout-btn" class="pntr">Logout</button>
    </header>
    <section id="main">
        <article>
            <img id="pp" value="{{pp}}" alt="Profile photo">
            <h1>{{name}}</h1>
            <h3>{{id}}</h3>
        </article>
    
        <main id="main">
            <h2>Your states :</h2>
            <div id="states">
                {{#states}}
                <div id="state-{{id}}" class="state">
                    <h1>{{id}}</h1>
                    <div>
                        <p>Message :</p>
                        <input id="state-msg-{{id}}" type="text" value="{{msg}}" maxlength = "25">
                    </div>
                    
                    <div>
                        <p>Color :</p>
                        <select id="color-selector-{{id}}" init="{{color}}">
                            <option value="green">green</option>
                            <option value="orange">orange</option>
                            <option value="red">red</option>
                        </select>
                    </div>
                    <div class="visibility">
                        <p>Visibility :</p>
                        <label>Student</label>
                        <input type="checkbox" init="{{visibility.student}}" id="visibility-student">
                        <label>Researcher</label>
                        <input type="checkbox" init="{{visibility.researcher}}" id="visibility-researcher" id="researcher">
                        <label>Colleague</label>
                        <input type="checkbox" init="{{visibility.colleague}}" id="visibility-colleague" id="colleague">
                    </div>
                    <p id="preview-{{id}}" class="status {{color}}" style="margin-left: 10px;">{{msg}}</p>
                </div>
                {{/states}}
            </div>

            <div id="default-messages" class="default-messages">
                <div class="input-default">
                    <div id="default-message-available" class="default-message">
                        <p>Available default message :</p>
                        <input type="text" value="{{default.available}}" maxlength = "25">
                    </div>
                    <p class="status green" style="margin-left: 10px;">{{msg}}</p>
                </div>

                <div class="input-default">
                    <div id="default-message-busy" class="default-message">
                        <p>Busy default message :</p>
                        <input type="text" value="{{default.busy}}" maxlength = "25">
                    </div>
                    <p class="status orange" style="margin-left: 10px;">{{msg}}</p>
                </div>
                
                <div class="input-default">
                    <div id="default-message-unavailable" class="default-message">
                        <p>Unavailable default message :</p>
                        <input type="text" value="{{default.unavailable}}" maxlength = "25">
                    </div>
                    <p class="status red" style="margin-left: 10px;">{{msg}}</p>
                </div>
                              
            </div>

        </main>
        <div class="states-control">
            <button class="pntr" id="add-state">+ State</button>
            <button class="pntr" id="save-states">Save</button>
            <button class="pntr" id="tracker" value="{{tracking}}">Tracker {{tracking}}</button>

        </div>
        
        <button class="pntr" id="my-flow">My flow</button>
        
    </section>
    <footer class="relative-footer">
        <h3>&copy; 2022 wimp</h3>
    </footer>
    
</body>
</html>